/**
 * @file ext-pictograms.js
 *
 * @license MIT
 *
 * @copyright 2022 Luis Zarate Montero
 *
 */
const e="pictograms",loadExtensionTranslation=async function(t){let n;const s=t.configObj.pref("lang");try{n=await function __variableDynamicImportRuntime0__(e){switch(e){case"./locale/en.js":return Promise.resolve().then((function(){return a}));case"./locale/fr.js":return Promise.resolve().then((function(){return o}));case"./locale/tr.js":return Promise.resolve().then((function(){return r}));case"./locale/zh-CN.js":return Promise.resolve().then((function(){return l}));default:return new Promise((function(t,a){("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(a.bind(null,new Error("Unknown variable dynamic import: "+e)))}))}}("./locale/".concat(s,".js"))}catch(t){console.warn("Missing translation (".concat(s,") for ").concat(e," - using 'en'")),n=await Promise.resolve().then((function(){return a}))}t.i18next.addResourceBundle(s,e,n.default)};var t={name:e,async init(){const e=this,t=e.svgCanvas,{$id:a,$click:o}=t,r=t.getSvgRoot();let l={};await loadExtensionTranslation(e);const n="tool_pictogram",s={};let i,c,m;return{callback(){if(null===a("tool_pictogram")){const r=e.configObj.curConfig.extPath,l='<se-explorerbutton id="tool_pictogram" title="pictogram" lib="'.concat(r,'/ext-pictograms/shapelib/" src="warning.svg"></se-explorerbutton>');t.insertChildAtIndex(a("tools_left"),l),o(a("tool_pictogram"),(()=>{this.leftPanel.updateLeftPanel("tool_pictogram")&&t.setMode(n)}))}},mouseDown(e){if(t.getMode()!==n)return;c=e.start_x;const a=c;m=e.start_y;const r=m;s.x=e.event.clientX,s.y=e.event.clientY;const u=t.getStyle();var g=document.getElementById("tool_pictogram").dataset.draw;return g.endsWith(".svg")?(t.setStarted(!0),i=t.addSVGElementsFromJson({element:"image",attr:{x:a,y:r,width:100,height:100,id:t.getNextId(),opacity:u.opacity/2,style:"pointer-events:inherit"}}),t.setHref(i,document.getElementById("tool_pictogram").$img.src),t.setImageURL(document.getElementById("tool_pictogram").$img.src),t.setSelectedElements(0,i),o(i,(e=>{e.preventDefault()}))):(i=t.addSVGElementsFromJson({element:"path",curStyles:!0,attr:{d:g,id:t.getNextId(),opacity:u.opacity/2,style:"pointer-events:none"}}),i.setAttribute("transform","translate("+a+","+r+") scale(0.005) translate("+-a+","+-r+")")),t.recalculateDimensions(i),l=i.getBBox(),{started:!0}},mouseMove(e){const a=t.getMode();if(console.log(a),a!==n)return;const o=t.getZoom(),s=e.event,u=e.mouse_x/o,g=e.mouse_y/o,h=i.transform.baseVal,d=i.getBBox(),p=d.x,b=d.y;Math.min(c,u),Math.min(m,g),Math.abs(u-c),Math.abs(g-m);l.width,l.height;let f=0;u<c&&(f=l.width);let _=0;g<m&&(_=l.height);const y=r.createSVGTransform(),j=r.createSVGTransform(),v=r.createSVGTransform();y.setTranslate(-(p+f),-(b+_)),s.shiftKey,j.setScale(1,1),v.setTranslate(p+f,b+_),h.appendItem(v),h.appendItem(j),h.appendItem(y),t.recalculateDimensions(i),l=i.getBBox()},mouseUp(e){if(t.getMode()!==n)return;return{keep:e.event.clientX!==s.x&&e.event.clientY!==s.y,element:i,started:!1}}}}},a=Object.freeze({__proto__:null,default:{loading:"Loading...",categories:{basic:"Basic",object:"Objects",symbol:"Symbols",arrow:"Arrows",flowchart:"Flowchart",animal:"Animals",game:"Cards & Chess",dialog_balloon:"Dialog balloons",electronics:"Electronics",math:"Mathematical",music:"Music",misc:"Miscellaneous",raphael_1:"raphaeljs.com set 1",raphael_2:"raphaeljs.com set 2"},buttons:[{title:"Shape library"}]}}),o=Object.freeze({__proto__:null,default:{loading:"Chargement...",categories:{basic:"Basique",object:"Objets",symbol:"Symboles",arrow:"Flèches",flowchart:"Flowchart",animal:"Animaux",game:"Cartes & Echecs",dialog_balloon:"Dialog balloons",electronics:"Electronique",math:"Mathematiques",music:"Musique",misc:"Divers",raphael_1:"raphaeljs.com set 1",raphael_2:"raphaeljs.com set 2"},buttons:[{title:"Bibliothèque d'images"}]}}),r=Object.freeze({__proto__:null,default:{loading:"Yükleniyor...",categories:{basic:"Temel",object:"Nesneler",symbol:"Semboller",arrow:"Oklar",flowchart:"Akış Şemaları",animal:"Hayvanlar",game:"Kartlar & Satranç",dialog_balloon:"Diyalog baloncukları",electronics:"Elektronikler",math:"Matematikseller",music:"Müzik",misc:"Diğerleri",raphael_1:"raphaeljs.com set 1",raphael_2:"raphaeljs.com set 2"},buttons:[{title:"Şekil kütüphanesi"}]}}),l=Object.freeze({__proto__:null,default:{loading:"正在加载...",categories:{basic:"基本",object:"对象",symbol:"符号",arrow:"箭头",flowchart:"工作流",animal:"动物",game:"棋牌",dialog_balloon:"会话框",electronics:"电子",math:"数学",music:"音乐",misc:"其他",raphael_1:"raphaeljs.com 集合 1",raphael_2:"raphaeljs.com 集合 2"},buttons:[{title:"图元库"}]}});export{t as default};
//# sourceMappingURL=ext-pictograms.js.map
