<!--
@organization: Solvo
@license: GNU General Public License v3.0
@date: Created on 4 oct. 2018
-->
{% extends 'label_index.html' %}
{% load i18n %}
{% load static %}
{% load bootstrap   %}
{# CSS #}
{% block css %}
    <link href="{% static 'editor/svgedit.css' %}" rel="stylesheet" media="all">
{% endblock css %}
{% block js %}
    <script>
        document.url_get_recipient_size = "{% url 'sga:get_recipient_size' 0 %}";
        document.clean_canvas_editor = {% if clean_canvas_editor %}true{% else %}false{% endif %};
        {% if width %}document.width = {{width}};{% endif %}
        {% if height %}document.height = {{height}};{% endif %}
        document.urls={
            'danger_indication_url': '{% url 'sga:get_danger_indication' %}',
            'prudence_advice_url': '{% url 'sga:prudence' %}',

        };
    </script>
    <script type="module">import SvgCanvas  from '/static/svgcanvas/svgcanvas.js';
    window.SvgCanvas=SvgCanvas;
</script>
    <script src="{% static 'sga/sga-bundle.js' %}" type="module"> </script>
    <script src="{% static 'sga/js/canvas_editor.js' %}"> </script>
    <script src="{% static 'sga/js/codigosPH.js' %}"></script>

{{form.media}}
{% endblock %}

{% block extrameta %}{% endblock extrameta %}

{% block content %}

<div class="row">
    <div class="col-sm-12">

        <div class="btn-group">
            <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true"
                  aria-expanded="false">
              {% trans 'Available templates' %} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">

              {% for tem in templates %}
                <li><a href="{% url 'sga:editor' %}?instance={{tem.pk}}"> {{tem.name}} </a></li>
              {% endfor %}

            </ul>

        </div>
        <h5 class="info-text">  {% trans 'Customize the selected template using the canvas editor and it elements' %}</h5>
        <div class="btn-group" style="width:100%">
        </div>
    </div>
</div>
<div class="row">

    <div class="col-sm-2 col-md-3">

      <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active">
            <a href="#general" aria-controls="general" role="tab" data-toggle="tab">
            {% trans 'General' %}</a>
        </li>
        <li role="presentation">
            <a href="#live" aria-controls="live" role="tab" data-toggle="tab">
            {% trans 'Live' %}</a>
        </li>
        <li role="presentation">
            <a href="#generic" aria-controls="generic" role="tab" data-toggle="tab">
            {% trans 'Generic' %} </a>
        </li>
        <li role="presentation">
            <a href="#custom" aria-controls="custom" role="tab" data-toggle="tab">
            {% trans 'Custom' %}</a>
        </li>
      </ul>
        <div class="tab-content" style="padding: 15px 20px 10px;">

    {% include 'editor/general.html' %}
    {% include 'editor/live.html' %}
    {% include 'editor/generic.html' %}
    {% include 'editor/custom.html' %}

  </div>
            {% trans 'Use save before finish' %}
        <button id="editor_save" type="submit" class="btn btn-success" >{% trans 'Save' %} </button>
    </div>

    <div class="col-sm-6 col-md-9" >
        <div class="clearfix visible-xs-block"></div>
        <div id="canvasContainer" class="canvas-container" >
            <div id="canvas_editor"  style="height: 600px;"></div>
        </div>
    </div>
</div>



<div id="wyswygmodal" class="modal" tabindex="-1" role="dialog">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">

        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <textarea data-widget="EditorTinymce" id="wyswygmodaltextarea"></textarea>
      </div>
      <div class="modal-footer">
        <button id="btnsave-multiline" type="button" class="btn btn-primary">Add</button>
        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>



{% endblock content %}
